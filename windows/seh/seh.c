#include <string.h>
#include <stdio.h>
#include <windows.h>

int ExceptionHandler(void)
{
	printf("Exception");
	return 0;
}
void f(char *buf)
{
	char flag = 'c';
	char s[10];
	strcpy(s, buf);
	__try
	{
		printf("%c\n", flag);
		if(flag != 'c')
			__asm int 0
	}
	__except(ExceptionHandler())
	{
	
	}
}
int main(int argc, char *argv[])
{
	char shellcode[1024];
	FILE * fp;
	LoadLibrary("libiconv-2.dll");
	LoadLibrary("user32.dll");
	fp=fopen("shellcode.txt","rw+");
	fscanf(fp,"%s",shellcode);
	f(shellcode);
	return 1;
}

